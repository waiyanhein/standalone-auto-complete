$(function(){!function(t){t.fn.standaloneAutoComplete=function(n){function e(){i(),t("."+l).length>0&&(u>-1?(r(t("."+l).eq(u)),u-=1):u=-1)}function o(){t("."+l).length-1>u&&(u+=1,i(),r(t("."+l).eq(u)))}function r(t){t.find(".standlone-item-container").css({border:c.s_item_border})}function i(){t("."+l).find(".standlone-item-container").css({border:c.item_border,"border-radius":c.item_border_radius})}function s(n){if(a(),n.length>0){f.parents(".standalone-input-holder").css({background:c.content_bg_color}),d.css({display:"block"});for(var e=0;e<n.length;e++){var o=n[e];null!=o.first_title&&""!=o.first_title&&(d.append("<a href='"+o.url+"' class='standlone-item-link'><div class='standlone-item-container'><img src='"+o.image_url+"' class='standlone-item-img' ><div class='standlone-item-content'><span class='standlone-item-first-title'>"+o.first_title+"</span><span class='standlone-item-second-title'>"+o.second_title+"</span></div></div></a>"),i(),t(".standlone-item-container").css({background:c.item_bg}))}}}function a(){d.css({display:"none"}),f.parents(".standalone-input-holder").css({background:"none"}),t(".standlone-item-container").remove(),t("."+l).remove(),d.html("")}var c=t.extend({search_start_limit:2,url:"",s_item_border:"2px solid #6699ff",item_border:"1px solid #cccccc",item_border_radius:"5px",content_bg_color:"#f2f2f2",content_border_radius:"10px",item_bg:"#ffffff"},n),l="standlone-item-link",d=t(".standlone-result-container"),u=-1,f=this;return f.parents(".standalone-input-holder").css({"border-top-right-radius":c.content_border_radius,"border-top-left-radius":c.content_border_radius}),d.css({background:c.content_bg_color,"border-bottom-right-radius":c.content_border_radius,"border-bottom-left-radius":c.content_border_radius}),this.on("keydown",function(t){return 13==t.which?(t.preventDefault(),!1):!0}),this.on("keyup",function(n){switch(n.which){case 13:if(u>-1){var r=t("."+l).eq(u).attr("href");window.location=r}else t(this).parents("form").submit();return n.preventDefault(),!1;case 38:return e(),n.preventDefault(),!1;case 40:return o(),n.preventDefault(),!1;default:i(),u=-1,c.search_start_limit<=this.value.length?t.get(c.url,{keyword:this.value},function(t){s(t)}):a()}}),this.on("focus",function(n){a(),c.search_start_limit<=this.value.length&&t.get(c.url,{keyword:this.value},function(t){s(t)})}),t(document).on("click",function(t){a()}),this.on("click",function(t){t.stopPropagation()}),t("body").delegate(".standlone-item-container","click",function(t){t.stopPropagation()}),this}}(jQuery)});